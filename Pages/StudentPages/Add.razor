@page "/StudentPages/Add"
@using BlazorCrud.Model
@using BlazorCrud.Gateway
@inject NavigationManager nav
<h3>Add Student</h3>            
<StudentCommonPages student="student" ButtonText="Add"  OnvalidSubmit="AddStudent" ></StudentCommonPages>
@*<h6 class="btn btn-success" >@msg</h6>*@
@*<EditForm Model="student" OnValidSubmit="AddStudent" >
    <ValidationSummary/>
    <DataAnnotationsValidator/>
    <div class="row">
        <div class="col-6">
            <div class="form-group">
                <label>Student Name </label>
                <InputText class="form-control" @bind-Value="@student.name"> </InputText>
                <ValidationMessage For="@(() => student.name)"></ValidationMessage>
            </div>
            <div class="form-group">
                <label>Registration No </label>
                <InputText class="form-control" @bind-Value="@student.registrationNo"> </InputText>
                <ValidationMessage For="@(() => student.registrationNo)"></ValidationMessage>
            </div>
            <div class="form-group">
                <label>Mobile No </label>
                <InputText class="form-control" @bind-Value="@student.mobileNo"> </InputText>
                <ValidationMessage For="@(() => student.mobileNo)"></ValidationMessage>
            </div>
            <div class="form-group">
                <label>Address</label>
                <InputText class="form-control" @bind-Value="@student.address"> </InputText>
                <ValidationMessage For="@(() => student.address)"></ValidationMessage>
            </div>
            <button type="submit" class="btn btn-info">Save</button>
        </div>
        
        <div>
           
        </div>
    </div>

</EditForm>*@
@code {
    Student student = new Student();
    string msg = null;
    GatewayManager gatewayM = new GatewayManager();
    public void AddStudent()
    {
        bool saved = gatewayM.Add(student);
        if (saved)
        {
            student= new Student();
             msg = "Student added successfully.";
            nav.NavigateTo("StudentPages/StudentList");
        }
    }

}
